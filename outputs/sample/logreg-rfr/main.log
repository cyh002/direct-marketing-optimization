[2025-07-08 06:34:19,940][__main__][INFO] - Starting main workflow
[2025-07-08 06:34:19,955][__main__][INFO] - Loading datasets
[2025-07-08 06:34:19,955][DataLoader][INFO] - Loading Excel file from /app/data/raw/DataScientist_CaseStudy_Dataset.xlsx
[2025-07-08 06:34:20,303][__main__][INFO] - Created sales data split
[2025-07-08 06:34:20,304][Preprocessor][INFO] - Model split: 775 train clients, 194 test clients
[2025-07-08 06:34:20,324][Preprocessor][INFO] - Saved train/test splits to ./preprocessed
[2025-07-08 06:34:20,324][__main__][INFO] - Created train/test split
[2025-07-08 06:34:20,327][__main__][INFO] - Merged training datasets
[2025-07-08 06:34:20,327][__main__][INFO] - Training dataset shape: (775, 36)
[2025-07-08 06:34:20,369][Preprocessor][INFO] - Dropped due to collinearity: ['Count_CA', 'TransactionsCred_CA', 'TransactionsDeb', 'TransactionsDebCashless_Card', 'TransactionsDeb_CA', 'VolumeCred_CA', 'VolumeDeb', 'VolumeDeb_CA', 'VolumeDeb_PaymentOrder']
[2025-07-08 06:34:20,370][__main__][INFO] - Preprocessing pipeline created
[2025-07-08 06:34:20,370][__main__][INFO] - Processing product CL
[2025-07-08 06:34:20,370][__main__][INFO] - Processing product MF
[2025-07-08 06:34:20,371][__main__][INFO] - Processing product CC
[2025-07-08 06:34:20,372][__main__][INFO] - Training models for CC
[2025-07-08 06:34:20,372][__main__][INFO] - Training models for CL
[2025-07-08 06:34:20,373][__main__][INFO] - Training models for MF
[2025-07-08 06:34:20,612][PropensityTrainer][INFO] - Starting cross validation with scoring=f1 and 5 folds
[2025-07-08 06:34:20,616][PropensityTrainer][INFO] - Starting cross validation with scoring=f1 and 5 folds
[2025-07-08 06:34:20,618][PropensityTrainer][INFO] - Starting cross validation with scoring=f1 and 5 folds
[2025-07-08 06:34:20,901][PropensityTrainer][INFO] - Cross validation completed: train_score=0.5319, test_score=0.5203
[2025-07-08 06:34:20,930][PropensityTrainer][INFO] - Cross validation completed: train_score=0.4305, test_score=0.3635
[2025-07-08 06:34:20,935][PropensityTrainer][INFO] - Cross validation completed: train_score=0.3775, test_score=0.3036
[2025-07-08 06:34:24,583][PropensityTrainer][INFO] - Model saved to ./models/propensity/CC/LogisticRegression.joblib
[2025-07-08 06:34:24,586][PropensityTrainer][INFO] - Metadata saved to ./models/propensity/CC/LogisticRegression_metadata.json
[2025-07-08 06:34:24,677][RevenueTrainer][INFO] - Starting cross validation with scoring=neg_root_mean_squared_error and 5 folds
[2025-07-08 06:34:24,904][PropensityTrainer][INFO] - Model saved to ./models/propensity/CL/LogisticRegression.joblib
[2025-07-08 06:34:24,906][PropensityTrainer][INFO] - Metadata saved to ./models/propensity/CL/LogisticRegression_metadata.json
[2025-07-08 06:34:24,935][PropensityTrainer][INFO] - Model saved to ./models/propensity/MF/LogisticRegression.joblib
[2025-07-08 06:34:24,935][PropensityTrainer][INFO] - Metadata saved to ./models/propensity/MF/LogisticRegression_metadata.json
[2025-07-08 06:34:24,938][RevenueTrainer][INFO] - Starting cross validation with scoring=neg_root_mean_squared_error and 5 folds
[2025-07-08 06:34:24,985][RevenueTrainer][INFO] - Starting cross validation with scoring=neg_root_mean_squared_error and 5 folds
[2025-07-08 06:34:26,563][RevenueTrainer][INFO] - Cross validation completed: train_score=-6.7649, test_score=-13.8690
[2025-07-08 06:34:26,603][RevenueTrainer][INFO] - Cross validation completed: train_score=-3.0134, test_score=-7.7650
[2025-07-08 06:34:26,677][RevenueTrainer][INFO] - Cross validation completed: train_score=-2.6279, test_score=-6.6094
[2025-07-08 06:34:28,839][RevenueTrainer][INFO] - Model saved to ./models/revenue/MF/RandomForestRegressor.joblib
[2025-07-08 06:34:28,839][RevenueTrainer][INFO] - Metadata saved to ./models/revenue/MF/RandomForestRegressor_metadata.json
[2025-07-08 06:34:28,844][RevenueTrainer][INFO] - Model saved to ./models/revenue/CC/RandomForestRegressor.joblib
[2025-07-08 06:34:28,844][RevenueTrainer][INFO] - Metadata saved to ./models/revenue/CC/RandomForestRegressor_metadata.json
[2025-07-08 06:34:28,850][__main__][INFO] - Finished training models for MF
[2025-07-08 06:34:28,854][__main__][INFO] - Finished training models for CC
[2025-07-08 06:34:28,882][RevenueTrainer][INFO] - Model saved to ./models/revenue/CL/RandomForestRegressor.joblib
[2025-07-08 06:34:28,882][RevenueTrainer][INFO] - Metadata saved to ./models/revenue/CL/RandomForestRegressor_metadata.json
[2025-07-08 06:34:28,888][__main__][INFO] - Finished training models for CL
[2025-07-08 06:34:28,888][__main__][INFO] - Starting inference
[2025-07-08 06:34:28,889][__main__][INFO] - Merging datasets for inference
[2025-07-08 06:34:28,893][__main__][INFO] - Running propensity and revenue inference
[2025-07-08 06:34:28,894][ModelLoader][INFO] - Loaded model from models/propensity/CL/LogisticRegression.joblib
[2025-07-08 06:34:28,898][ModelLoader][INFO] - Loaded model from models/propensity/MF/LogisticRegression.joblib
[2025-07-08 06:34:28,901][ModelLoader][INFO] - Loaded model from models/propensity/CC/LogisticRegression.joblib
[2025-07-08 06:34:28,904][ModelLoader][INFO] - Loaded model from models/revenue/CL/RandomForestRegressor.joblib
[2025-07-08 06:34:28,923][ModelLoader][INFO] - Loaded model from models/revenue/MF/RandomForestRegressor.joblib
[2025-07-08 06:34:28,941][ModelLoader][INFO] - Loaded model from models/revenue/CC/RandomForestRegressor.joblib
[2025-07-08 06:34:28,959][__main__][INFO] - Saving inference results
[2025-07-08 06:34:28,962][PropensityInference][INFO] - Saved inference results to /app/outputs/2025-07-08/06-34-19/inference/propensity_predictions.csv
[2025-07-08 06:34:28,965][RevenueInference][INFO] - Saved inference results to /app/outputs/2025-07-08/06-34-19/inference/revenue_predictions.csv
[2025-07-08 06:34:28,965][__main__][INFO] - Starting optimization
[2025-07-08 06:34:28,965][__main__][INFO] - Running optimization
[2025-07-08 06:34:28,992][__main__][INFO] - Starting evaluation
[2025-07-08 06:34:28,992][__main__][INFO] - Evaluating optimization results
[2025-07-08 06:34:28,992][__main__][INFO] - total_revenue: 1414.4914
[2025-07-08 06:34:28,992][__main__][INFO] - revenue_per_contact: 14.1449
[2025-07-08 06:34:28,992][__main__][INFO] - acceptance_rate: 0.6850
[2025-07-08 06:34:28,992][__main__][INFO] - roi: 14.1449
[2025-07-08 06:34:28,993][Evaluator][INFO] - Saved evaluation metrics to /app/outputs/2025-07-08/06-34-19/results/evaluation_metrics.csv
[2025-07-08 06:34:28,993][__main__][INFO] - Saving optimized offers
[2025-07-08 06:34:28,993][__main__][INFO] - Saving optimized offers
