[2025-07-08 06:35:28,269][__main__][INFO] - Starting main workflow
[2025-07-08 06:35:28,285][__main__][INFO] - Loading datasets
[2025-07-08 06:35:28,285][DataLoader][INFO] - Loading Excel file from /app/data/raw/DataScientist_CaseStudy_Dataset.xlsx
[2025-07-08 06:35:28,630][__main__][INFO] - Created sales data split
[2025-07-08 06:35:28,631][Preprocessor][INFO] - Model split: 775 train clients, 194 test clients
[2025-07-08 06:35:28,650][Preprocessor][INFO] - Saved train/test splits to ./preprocessed
[2025-07-08 06:35:28,650][__main__][INFO] - Created train/test split
[2025-07-08 06:35:28,652][__main__][INFO] - Merged training datasets
[2025-07-08 06:35:28,652][__main__][INFO] - Training dataset shape: (775, 36)
[2025-07-08 06:35:28,698][Preprocessor][INFO] - Dropped due to collinearity: ['Count_CA', 'TransactionsCred_CA', 'TransactionsDeb', 'TransactionsDebCashless_Card', 'TransactionsDeb_CA', 'VolumeCred_CA', 'VolumeDeb', 'VolumeDeb_CA', 'VolumeDeb_PaymentOrder']
[2025-07-08 06:35:28,699][__main__][INFO] - Preprocessing pipeline created
[2025-07-08 06:35:28,699][__main__][INFO] - Processing product CL
[2025-07-08 06:35:28,699][__main__][INFO] - Processing product MF
[2025-07-08 06:35:28,700][__main__][INFO] - Processing product CC
[2025-07-08 06:35:28,702][__main__][INFO] - Training models for CC
[2025-07-08 06:35:28,702][__main__][INFO] - Training models for MF
[2025-07-08 06:35:28,703][__main__][INFO] - Training models for CL
[2025-07-08 06:35:28,944][PropensityTrainer][INFO] - Starting cross validation with scoring=f1 and 5 folds
[2025-07-08 06:35:28,950][PropensityTrainer][INFO] - Starting cross validation with scoring=f1 and 5 folds
[2025-07-08 06:35:28,950][PropensityTrainer][INFO] - Starting cross validation with scoring=f1 and 5 folds
[2025-07-08 06:35:31,536][PropensityTrainer][INFO] - Cross validation completed: train_score=0.9724, test_score=0.1045
[2025-07-08 06:35:31,591][PropensityTrainer][INFO] - Cross validation completed: train_score=0.9502, test_score=0.3443
[2025-07-08 06:35:31,604][PropensityTrainer][INFO] - Cross validation completed: train_score=0.9455, test_score=0.2737
[2025-07-08 06:35:36,137][PropensityTrainer][INFO] - Model saved to ./models/propensity/CL/RandomForestClassifier.joblib
[2025-07-08 06:35:36,139][PropensityTrainer][INFO] - Metadata saved to ./models/propensity/CL/RandomForestClassifier_metadata.json
[2025-07-08 06:35:36,160][PropensityTrainer][INFO] - Model saved to ./models/propensity/MF/RandomForestClassifier.joblib
[2025-07-08 06:35:36,160][PropensityTrainer][INFO] - Metadata saved to ./models/propensity/MF/RandomForestClassifier_metadata.json
[2025-07-08 06:35:36,175][RevenueTrainer][INFO] - Starting cross validation with scoring=neg_root_mean_squared_error and 5 folds
[2025-07-08 06:35:36,205][RevenueTrainer][INFO] - Starting cross validation with scoring=neg_root_mean_squared_error and 5 folds
[2025-07-08 06:35:36,291][PropensityTrainer][INFO] - Model saved to ./models/propensity/CC/RandomForestClassifier.joblib
[2025-07-08 06:35:36,292][PropensityTrainer][INFO] - Metadata saved to ./models/propensity/CC/RandomForestClassifier_metadata.json
[2025-07-08 06:35:36,330][RevenueTrainer][INFO] - Starting cross validation with scoring=neg_root_mean_squared_error and 5 folds
[2025-07-08 06:35:36,381][RevenueTrainer][INFO] - Cross validation completed: train_score=-7.6417, test_score=-7.7609
[2025-07-08 06:35:36,422][RevenueTrainer][INFO] - Cross validation completed: train_score=-6.6716, test_score=-6.5343
[2025-07-08 06:35:36,501][RevenueTrainer][INFO] - Cross validation completed: train_score=-15.8967, test_score=-13.2933
[2025-07-08 06:35:38,396][RevenueTrainer][INFO] - Model saved to ./models/revenue/CL/LinearRegression.joblib
[2025-07-08 06:35:38,397][RevenueTrainer][INFO] - Metadata saved to ./models/revenue/CL/LinearRegression_metadata.json
[2025-07-08 06:35:38,415][__main__][INFO] - Finished training models for CL
[2025-07-08 06:35:38,424][RevenueTrainer][INFO] - Model saved to ./models/revenue/MF/LinearRegression.joblib
[2025-07-08 06:35:38,425][RevenueTrainer][INFO] - Metadata saved to ./models/revenue/MF/LinearRegression_metadata.json
[2025-07-08 06:35:38,433][RevenueTrainer][INFO] - Model saved to ./models/revenue/CC/LinearRegression.joblib
[2025-07-08 06:35:38,433][RevenueTrainer][INFO] - Metadata saved to ./models/revenue/CC/LinearRegression_metadata.json
[2025-07-08 06:35:38,434][__main__][INFO] - Finished training models for MF
[2025-07-08 06:35:38,439][__main__][INFO] - Finished training models for CC
[2025-07-08 06:35:38,439][__main__][INFO] - Starting inference
[2025-07-08 06:35:38,439][__main__][INFO] - Merging datasets for inference
[2025-07-08 06:35:38,443][__main__][INFO] - Running propensity and revenue inference
[2025-07-08 06:35:38,444][ModelLoader][INFO] - Loaded model from models/propensity/CL/RandomForestClassifier.joblib
[2025-07-08 06:35:38,467][ModelLoader][INFO] - Loaded model from models/propensity/MF/RandomForestClassifier.joblib
[2025-07-08 06:35:38,485][ModelLoader][INFO] - Loaded model from models/propensity/CC/RandomForestClassifier.joblib
[2025-07-08 06:35:38,502][ModelLoader][INFO] - Loaded model from models/revenue/CL/LinearRegression.joblib
[2025-07-08 06:35:38,505][ModelLoader][INFO] - Loaded model from models/revenue/MF/LinearRegression.joblib
[2025-07-08 06:35:38,508][ModelLoader][INFO] - Loaded model from models/revenue/CC/LinearRegression.joblib
[2025-07-08 06:35:38,511][__main__][INFO] - Saving inference results
[2025-07-08 06:35:38,514][PropensityInference][INFO] - Saved inference results to /app/outputs/2025-07-08/06-35-28/inference/propensity_predictions.csv
[2025-07-08 06:35:38,517][RevenueInference][INFO] - Saved inference results to /app/outputs/2025-07-08/06-35-28/inference/revenue_predictions.csv
[2025-07-08 06:35:38,517][__main__][INFO] - Starting optimization
[2025-07-08 06:35:38,517][__main__][INFO] - Running optimization
[2025-07-08 06:35:38,542][__main__][INFO] - Starting evaluation
[2025-07-08 06:35:38,542][__main__][INFO] - Evaluating optimization results
[2025-07-08 06:35:38,542][__main__][INFO] - total_revenue: 610.8748
[2025-07-08 06:35:38,542][__main__][INFO] - revenue_per_contact: 6.1087
[2025-07-08 06:35:38,543][__main__][INFO] - acceptance_rate: 0.7517
[2025-07-08 06:35:38,543][__main__][INFO] - roi: 6.1087
[2025-07-08 06:35:38,544][Evaluator][INFO] - Saved evaluation metrics to /app/outputs/2025-07-08/06-35-28/results/evaluation_metrics.csv
[2025-07-08 06:35:38,545][__main__][INFO] - Saving optimized offers
[2025-07-08 06:35:38,545][__main__][INFO] - Saving optimized offers
